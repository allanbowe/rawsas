---
title: 'Copy All Files From One Directory To Another'
date: '2013-07-23 17:39:00'
path: '/copy-all-files-from-one-directory-to-another/'
tags:
  - SQL
---

Platform agnostic.. &nbsp;Just modify the in / out ROOT folders, and enter the corresponding copy FROM / copy TO directories in the cards file.<br /><br /><br /><div style="font-family: 'Courier New'; font-size: 10px; min-height: 11px;"><br /></div><div style="color: #008f00; font-family: 'Courier New'; font-size: 10px;"><span style="color: #0433ff;">%let</span><span style="color: black;"> inroot=C:temp; </span>/_ NO trailing slashes _/</div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="color: #0433ff;">%let</span> outroot=C:temp;</div><div style="font-family: 'Courier New'; font-size: 10px; min-height: 11px;"><br /></div><div style="color: #0433ff; font-family: 'Courier New'; font-size: 10px;"><span style="color: #011993;"><b>data</b></span><span style="color: black;"> </span>_null_<span style="color: black;">;</span></div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; <span style="color: #0433ff;">infile</span> cards <span style="color: #0433ff;">dsd</span>;</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; <span style="color: #0433ff;">input</span> INDIR : <span style="color: #009193;">$60.</span> OUTDIR : <span style="color: #009193;">$60.</span> ;</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; <span style="color: #0433ff;">call</span> symput(cats(<span style="color: #942193;">'INDIR'</span>,_n_),cats(<span style="color: #942193;">"&amp;inroot"</span>,indir));</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; <span style="color: #0433ff;">call</span> symput(cats(<span style="color: #942193;">'OUTDIR'</span>,_n_),cats(<span style="color: #942193;">"&amp;outroot"</span>,outdir));</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; <span style="color: #0433ff;">call</span> symput(<span style="color: #942193;">'CNT'</span>,put(_n_,<span style="color: #009193;"><b>8.</b></span>));</div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="color: #0433ff;">cards4</span>;/_ list relative folders with NO leading or trailing slashes _/</div><div style="font-family: 'Courier New'; font-size: 10px;">mxc,mxd</div><div style="font-family: 'Courier New'; font-size: 10px;">;;;;</div><div style="color: #0433ff; font-family: 'Courier New'; font-size: 10px;">run<span style="color: black;">;</span></div><div style="font-family: 'Courier New'; font-size: 10px; min-height: 11px;"><br /></div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="color: #011993;"><b>%macro</b></span> copyFile(in,out);</div><div style="color: #008f00; font-family: 'Courier New'; font-size: 10px;">/_ these IN and OUT filerefs can point to any file _/</div><div style="font-family: 'Courier New'; font-size: 10px;">filename in <span style="color: #942193;">"&amp;in"</span>;&nbsp;</div><div style="font-family: 'Courier New'; font-size: 10px;">filename out <span style="color: #942193;">"&amp;out"</span>;&nbsp;</div><div style="font-family: 'Courier New'; font-size: 10px; min-height: 11px;"><br /></div><div style="color: #008f00; font-family: 'Courier New'; font-size: 10px;">/_ copy the file byte-for-byte&nbsp; _/</div><div style="font-family: 'Courier New'; font-size: 10px;">data _null_;</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; length filein <span style="color: #009193;"><b>8</b></span> fileid <span style="color: #009193;"><b>8</b></span>;</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; filein = fopen(<span style="color: #942193;">'in'</span>,<span style="color: #942193;">'I'</span>,<span style="color: #009193;"><b>1</b></span>,<span style="color: #942193;">'B'</span>);</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; fileid = fopen(<span style="color: #942193;">'out'</span>,<span style="color: #942193;">'O'</span>,<span style="color: #009193;"><b>1</b></span>,<span style="color: #942193;">'B'</span>);</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; rec = <span style="color: #942193;">'20'x</span>;</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; do while(fread(filein)=<span style="color: #009193;"><b>0</b></span>);</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp;&nbsp; &nbsp; rc = fget(filein,rec,<span style="color: #009193;"><b>1</b></span>);</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp;&nbsp; &nbsp; rc = fput(fileid, rec);</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp;&nbsp; &nbsp; rc =fwrite(fileid);</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; end;</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; rc = fclose(filein);</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; rc = fclose(fileid);</div><div style="font-family: 'Courier New'; font-size: 10px;">run;</div><div style="font-family: 'Courier New'; font-size: 10px; min-height: 11px;"><br /></div><div style="font-family: 'Courier New'; font-size: 10px;">filename in clear;</div><div style="font-family: 'Courier New'; font-size: 10px;">filename out clear;</div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="color: #011993;"><b>%mend</b></span> CopyFile;</div><div style="font-family: 'Courier New'; font-size: 10px; min-height: 11px;"><br /></div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="color: #011993;"><b>%macro</b></span> getFilenames(location,dataset);</div><div style="color: #942193; font-family: 'Courier New'; font-size: 10px;"><span style="color: black;">filename _dir_ </span>"%bquote(&amp;location.)"<span style="color: black;">;</span></div><div style="font-family: 'Courier New'; font-size: 10px;">data &amp;<span style="color: #009193;">dataset.</span>(keep=memname);</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; handle=dopen( <span style="color: #942193;">'_dir_'</span> );</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; if handle &gt; <span style="color: #009193;"><b>0</b></span> then do;</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; &nbsp; count=dnum(handle);</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; &nbsp; do i=<span style="color: #009193;"><b>1</b></span> to count;</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; &nbsp; &nbsp; memname=dread(handle,i);</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; &nbsp; &nbsp; output;</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; &nbsp; end;</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; end;</div><div style="font-family: 'Courier New'; font-size: 10px;">&nbsp; rc=dclose(handle);</div><div style="font-family: 'Courier New'; font-size: 10px;">run;</div><div style="font-family: 'Courier New'; font-size: 10px;">filename _dir_ clear;</div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="color: #011993;"><b>%mend</b></span> getFilenames;</div><div style="font-family: 'Courier New'; font-size: 10px; min-height: 11px;"><br /></div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="color: #011993;"><b>%macro</b></span> DoCopy();</div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="color: #0433ff;">%do</span> x=<span style="color: #009193;"><b>1</b></span> <span style="color: #0433ff;">%to</span> &amp;cnt;</div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="white-space: pre;"> </span>%<b><i>getFilenames</i></b>(&amp;&amp;indir&amp;x,ds&amp;x);</div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="white-space: pre;"> </span>data _null_;</div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="white-space: pre;"> </span>set ds&amp;x;</div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="white-space: pre;"> </span>call execute(cats(<span style="color: #942193;">'%copyfile(&amp;&amp;indir&amp;x'</span>,memname,<span style="color: #942193;">",&amp;&amp;outdir&amp;x"</span>,memname,<span style="color: #942193;">')'</span>));</div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="white-space: pre;"> </span>run;</div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="white-space: pre;"> </span>proc sql; drop table ds&amp;x; quit;</div><div style="color: #0433ff; font-family: 'Courier New'; font-size: 10px;">%end<span style="color: black;">;</span></div><div style="font-family: 'Courier New'; font-size: 10px;"><span style="color: #011993;"><b>%mend</b></span> DoCopy;</div><div style="font-family: 'Courier New'; font-size: 10px; min-height: 11px;"><br /></div><div style="font-family: 'Courier New'; font-size: 10px;">%<b><i>docopy</i></b>;</div>
