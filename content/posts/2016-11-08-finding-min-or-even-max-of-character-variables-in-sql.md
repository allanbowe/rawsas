---
title: 'Finding MIN (or even MAX) of character variables in SQL'
date: '2016-11-08 19:27:00'
path: '/finding-min-or-even-max-of-character-variables-in-sql/'
tags:
  - SQL
---

It is perfectly valid to use <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">min()</span> as a <a href="http://support.sas.com/kb/25/279.html" target="_blank">summary function</a> on character values in <span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">proc sql</span>, eg as follows:<br /><blockquote style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">proc</span></b><span style="background: white; font-family: &quot;courier new&quot;;"> </span><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">sql</span></b><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">create</span><span style="background: white; font-family: &quot;courier new&quot;;"> </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">table</span><span style="background: white; font-family: &quot;courier new&quot;;"> test </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">as</span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; <br /></span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">&nbsp; select</span><span style="background: white; font-family: &quot;courier new&quot;;"> min(name) </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">as</span><span style="background: white; font-family: &quot;courier new&quot;;"> minval<br /></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">from</span><span style="background: white; font-family: &quot;courier new&quot;;"> sashelp.class;</span></blockquote><br /><br />This is not so, however, when using in an inline context:<br /><blockquote style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">proc</span></b><span style="background: white; font-family: &quot;courier new&quot;;"> </span><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">sql</span></b><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">create</span><span style="background: white; font-family: &quot;courier new&quot;;"> </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">table</span><span style="background: white; font-family: &quot;courier new&quot;;"> test </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">as</span><span style="background: white; font-family: &quot;courier new&quot;;"><br /> </span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">select</span><span style="background: white; font-family: &quot;courier new&quot;;"> min(name,sex) </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">as</span><span style="background: white; font-family: &quot;courier new&quot;;"> minval<br /></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">from</span><span style="background: white; font-family: &quot;courier new&quot;;"> sashelp.class;</span></blockquote><br />Which gives:<br /><blockquote style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"><div style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"><span style="background: white; color: red; font-family: &quot;courier new&quot;;">ERROR: Function MIN requires a numeric expression as argument 1.</span></div><div><span style="background: white; color: red; font-family: &quot;courier new&quot;;">ERROR: Function MIN requires a numeric expression as argument 2.</span></div></blockquote><div></div><br />So what are the alternatives? &nbsp;If we were in datastep, we might have had the option of the little-known<a href="http://support.sas.com/documentation/cdl/en/lrcon/62955/HTML/default/viewer.htm#a000780367.htm" target="_blank"> infix operator</a>&nbsp;for min (&gt;&lt;):<br /><blockquote style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"><div style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">data</span></b><span style="background: white; font-family: &quot;courier new&quot;;"> </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">_null_</span><span style="background: white; font-family: &quot;courier new&quot;;">;</span></div><div style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; minval=</span><span style="background: white; color: purple; font-family: &quot;courier new&quot;;">'Less'</span><span style="background: white; font-family: &quot;courier new&quot;;">&gt;&lt;</span><span style="background: white; color: purple; font-family: &quot;courier new&quot;;">'More'</span><span style="background: white; font-family: &quot;courier new&quot;;">&gt;&lt;</span><span style="background: white; color: purple; font-family: &quot;courier new&quot;;">'Lots'</span><span style="background: white; font-family: &quot;courier new&quot;;">;</span></div><div style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">put</span><span style="background: white; font-family: &quot;courier new&quot;;"> minval=;&nbsp; </span><span style="background: white; color: green; font-family: &quot;courier new&quot;;">/_ minval=Less _/</span><span style="background: white; font-family: &quot;courier new&quot;;"></span></div><div style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">run</span></b><span style="background: white; font-family: &quot;courier new&quot;;">;</span></div></blockquote><br />As it happens though, the min &amp; max infix operators are not valid in proc sql. &nbsp;Another approach, if comparing just two values, would be&nbsp;<span style="font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace;">ifc()</span> - eg:<br /><blockquote style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">proc</span></b><span style="background: white; font-family: &quot;courier new&quot;;"> </span><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">sql</span></b><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">create</span><span style="background: white; font-family: &quot;courier new&quot;;"> </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">table</span><span style="background: white; font-family: &quot;courier new&quot;;"> test </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">as<br /></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp;</span>&nbsp; <span style="background: white; color: blue; font-family: &quot;courier new&quot;;">select</span><span style="background: white; font-family: &quot;courier new&quot;;"> ifc(name&lt;sex,name,sex) </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">as</span><span style="background: white; font-family: &quot;courier new&quot;;"> minval<br /></span><span style="background: white; font-family: &quot;courier new&quot;;"></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">from</span><span style="background: white; font-family: &quot;courier new&quot;;"> sashelp.class;</span></blockquote><br /><br />But what if we have more than two values? &nbsp;In this instance, it becomes necessary to take matters into your own hands! &nbsp;I've gone ahead and rolled up an FCMP function below, which could surely be improved, but does the job when comparing three character values in either data step or proc sql:<br /><blockquote style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"><br /><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">proc</span></b><span style="background: white; font-family: &quot;courier new&quot;;"> </span><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">fcmp</span></b><span style="background: white; font-family: &quot;courier new&quot;;"> </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">outlib</span><span style="background: white; font-family: &quot;courier new&quot;;">=work.myfuncs.test;<br /></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">function</span><span style="background: white; font-family: &quot;courier new&quot;;"> minC(a $, b $, c $) $;<br /></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp;&nbsp;&nbsp; </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">length</span><span style="background: white; font-family: &quot;courier new&quot;;"> result \$</span><b><span style="background: white; color: teal; font-family: &quot;courier new&quot;;">1000</span></b><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp;&nbsp;&nbsp; result=a&gt;&lt;b&gt;&lt;c;</span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp;&nbsp;&nbsp; <br /></span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">&nbsp; &nbsp; return</span><span style="background: white; font-family: &quot;courier new&quot;;"> (result);<br /></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">endsub</span><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">quit</span></b><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">options</span><span style="background: white; font-family: &quot;courier new&quot;;"> </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">cmplib</span><span style="background: white; font-family: &quot;courier new&quot;;">=work.myfuncs;<br /></span><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">data</span></b><span style="background: white; font-family: &quot;courier new&quot;;"> </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">_null_</span><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">x</span><span style="background: white; font-family: &quot;courier new&quot;;">=</span><span style="background: white; color: purple; font-family: &quot;courier new&quot;;">'Killing'</span><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; y=</span><span style="background: white; color: purple; font-family: &quot;courier new&quot;;">'Me'</span><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; z=</span><span style="background: white; color: purple; font-family: &quot;courier new&quot;;">'Softly'</span><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; outvar=minC(x,y,z);</span><span style="background: white; font-family: &quot;courier new&quot;;"><br /></span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">&nbsp; put</span><span style="background: white; font-family: &quot;courier new&quot;;"> outvar=;<br /></span><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">run</span></b><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">proc</span></b><span style="background: white; font-family: &quot;courier new&quot;;"> </span><b><span style="background: white; color: navy; font-family: &quot;courier new&quot;;">sql</span></b><span style="background: white; font-family: &quot;courier new&quot;;">;<br /></span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">create</span><span style="background: white; font-family: &quot;courier new&quot;;"> </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">table</span><span style="background: white; font-family: &quot;courier new&quot;;"> test </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">as</span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; <br /></span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">&nbsp; select</span><span style="background: white; font-family: &quot;courier new&quot;;"> minC(</span><span style="background-color: white; color: purple; font-family: &quot;courier new&quot;;">'Constant',</span><span style="background-color: white; font-family: &quot;courier new&quot;;">name,sex)</span><br /><span style="background: white; font-family: &quot;courier new&quot;;"></span><span style="background: white; font-family: &quot;courier new&quot;;">&nbsp; </span><span style="background: white; color: blue; font-family: &quot;courier new&quot;;">from</span><span style="background: white; font-family: &quot;courier new&quot;;"> sashelp.class;</span></blockquote><div style="line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;"></div><br /><div><br /></div>Would you deal with the requirement any differently? &nbsp;Let me know in the comments!<br /><br />
