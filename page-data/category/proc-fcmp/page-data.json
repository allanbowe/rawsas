{"componentChunkName":"component---src-templates-post-list-template-tsx","path":"/category/proc-fcmp/","result":{"data":{"remark":{"posts":[{"post":{"html":"<p>Having worked a lot with <code class=\"language-text\">proc fcmp</code> lately, I think it’s fair to say that the procedure should be ‘handled with care’.</p>\n<p>Here’s an example of one of these weird / wonderful bugs (LIN X64, 9.04.01M3P062415):</p>\n<div class=\"gatsby-highlight\" data-language=\"sas\"><pre class=\"language-sas\"><code class=\"language-sas\"><span class=\"token step keyword\">proc fcmp</span> <span class=\"token proc-args\"><span class=\"token arg keyword\">outlib</span><span class=\"token operator\">=</span><span class=\"token arg-value\">work.funcs.pkg</span><span class=\"token punctuation\">;</span></span>\n  <span class=\"token keyword\">function</span> <span class=\"token function keyword\">test</span><span class=\"token punctuation\">(</span>cval <span class=\"token punctuation\">$</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">file</span> log<span class=\"token punctuation\">;</span> <span class=\"token keyword\">put</span> cval<span class=\"token operator\">=</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">put</span> <span class=\"token string\">'also.. you can % see % this'</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  endsub<span class=\"token punctuation\">;</span>\n<span class=\"token step keyword\">quit</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">options</span> cmplib<span class=\"token operator\">=</span>work<span class=\"token punctuation\">.</span>funcs<span class=\"token punctuation\">;</span>\n<span class=\"token step keyword\">data</span> null<span class=\"token punctuation\">;</span>\n  x<span class=\"token operator\">=</span><span class=\"token string\">\"example %\"</span><span class=\"token punctuation\">;</span>\n  rc<span class=\"token operator\">=</span><span class=\"token function keyword\">test</span><span class=\"token punctuation\">(</span>x<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token step keyword\">run</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>When you look at the log, the percent symbols are missing:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cval=example\nalso.. you can see this</code></pre></div>\n<p>So this is strange, but it gets stranger.  If you don’t have a clean session, you will also see parts of previous messages in the log.  For instance, if you now run the exact same above code again, you get:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">cval=example % see % this\nalso.. you can see this</code></pre></div>\n<p>So the % symbols return, in a different place!   Now, whilst this is a strange bug, it only seems to affect messages sent to the log.  So not an issue right?</p>\n<p>Wrong..  It seems that this can cause a fatal error:<br /><br /><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> ERROR: An exception has been encountered.</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> Please contact technical support and provide them with the following traceback information:</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> </div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> The SAS task name is [TKSRV ]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> Segmentation Violation</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> </div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> Traceback of the Exception:</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> </div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /pub/sas/SASFoundation/9.4/sasexe/sas(+0x15aa8e) [0x7f7163e73a8e]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /pub/sas/SASFoundation/9.4/sasexe/sas(+0x4cb0b) [0x7f7163d65b0b]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /pub/sas/SASFoundation/9.4/sasexe/tkmk.so(bkt_signal_handler+0x144) [0x7f71626873c4]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /lib64/libpthread.so.0(+0xf370) [0x7f71638ea370]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /pub/sas/SASFoundation/9.4/dbcs/sasexe/sasxkern(+0x7462e) [0x7f7151f4f62e]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /pub/sas/SASFoundation/9.4/dbcs/sasexe/sasxkern(ypslf+0xa2b) [0x7f7151f4eabb]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /pub/sas/SASFoundation/9.4/dbcs/sasexe/sasxkern(ypsllog+0x13c) [0x7f7151f51b9c]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /pub/sas/SASFoundation/9.4/sasexe/sastksrv(adjustline+0x59e) [0x7f714a60c1ce]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /pub/sas/SASFoundation/9.4/sasexe/sastksrv(sastksrv+0xec1) [0x7f714a60b531]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /pub/sas/SASFoundation/9.4/sasexe/sas(vvtentr+0x13d) [0x7f7163d656ad]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /lib64/libpthread.so.0(+0x7dc5) [0x7f71638e2dc5]</div><div style=\"background-color: white; color: red; font-family: Consolas, Courier, &quot;Courier New&quot;; font-size: 16px; white-space: pre;\"> /lib64/libc.so.6(clone+0x6d) [0x7f7162ed476d]</div><br /><br /></p>\n<p>Conclusion?  Don’t send code to production that has <code class=\"language-text\">proc fcmp</code> writing character values to the log that may contain a % symbol!</p>","frontmatter":{"title":"proc fcmp - file log put % bug","path":"/proc-fcmp-file-log-put-bug/","previewImg":null,"tags":["proc-fcmp"],"date":"Aug 06, 2017"}}}]}},"pageContext":{"page":"category","archives":{"2012":8,"2013":10,"2014":4,"2015":7,"2016":17,"2017":12,"2018":9,"2019":2,"2020":3,"2021":1,"2022":7,"2023":1,"2024":1,"2025":3},"filter":{"frontmatter":{"tags":{"in":["proc-fcmp"]}}},"limit":10,"skip":0,"numPages":1,"currentPage":1,"tag":"proc-fcmp"}},"staticQueryHashes":["1133634862"],"slicesMap":{}}