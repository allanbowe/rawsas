{"componentChunkName":"component---src-templates-post-list-template-tsx","path":"/category/sas-stored-process-web-application/","result":{"data":{"remark":{"posts":[{"post":{"html":"<p>A useful feature of SAS Stored Processes is the ability to load multiple files in a single request. This could be a bunch of CSVs for processing, or even a <code class=\"language-text\">.sas</code> program that you want to <code class=\"language-text\">%include</code> along with some associated data (deliberate SAS injection). This is particularly useful when you are running a build process, eg for a web application, and you need to send across some SAS programs that should be compiled into Stored Processes and re-downloaded as a distributable SPK. If you send your executable .sas program as the first file, to a ‘master’ STP that has just one line of code (<code class=\"language-text\">%inc &amp;amp;_webin_fileref1/source2;</code>), then this becomes the only entry point you need when running from a non-SAS environment!</p>\n<p>Anyway, here is the sample code:</p>\n<pre>curl -v -L -b cookiefile -c cookiefile \\\n    -H \"Content-Type: multipart/form-data\" \\\n    -F \"myprogram=@./runme.sas\" \\\n    -F \"somefile1=@./processme.csv\" \\\n    -F \"somefile2=@./processmeaswell.csv\" \\\n    \"$SERVER?_program=$STP&amp;_username=$USER&amp;_password=$PASS\"\n    --output \"/tmp/out.txt\"</pre>\n<p>Things to note:</p>\n<h3>curl options</h3>\n<ul>\n \t<li>-v = verbose</li>\n \t<li>-L = follow the redirects</li>\n \t<li>-b / -c = cookie in / out</li>\n \t<li>-H = http header</li>\n \t<li>-F = Files for upload</li>\n \t<li>--output = output filename</li>\n</ul>\n<h3>Substitutions</h3>\n<ul>\n \t<li>$SERVER = your SAS server, eg: https://yourserver.com/SASStoredProcess/do</li>\n \t<li>$STP = full metadata path to STP, eg:  /my/meta/path/to/my/service</li>\n \t<li>$USER = sas username, including @saspw suffix if an internal account</li>\n \t<li>$PASS = sas password</li>\n</ul>\n<strong>SAS Considerations</strong>\n<p>The following automatically assigned macro variables will be helpful when accessing the files you have uploaded:</p>\n<ul>\n \t<li>_WEBIN_FILE_COUNT - contains a count of the number of files that were uploaded</li>\n \t<li>_WEBIN_FILEREF - a unique fileref that can be used to access the file</li>\n \t<li>_WEBIN_FILENAME - the location in which the file is saved in SAS (eg in WORK)</li>\n \t<li>_WEBIN_NAME - the name given for the file on upload (eg somefile1 / somefile2 in the example)</li>\n</ul>\nThe above variables are actually macro variable arrays - so _WEBIN_FILENAME1 will be the first,  _WEBIN_FILENAME2 will be the second, and so on.\n<h3>Further resources</h3>\nIf you want more background on building web applications with SAS, check out the following resources!\n<ul>\n \t<li><a href=\"https://github.com/sasjs/core\">MacroCore</a> - library for SAS Application Development</li>\n \t<li><a href=\"https://github.com/sasjs/adapter\">SASjs</a> - Adapter for SAS-JS communication</li>\n \t<li><a href=\"https://github.com/sasjs/cli\">sasjs-cli</a> - utility for building SAS Apps</li>\n \t<li>https://sasjs.io - guide to building web apps on SAS</li>\n</ul>\n<a href=\"https://datacontroller.io\">Data Controller</a> is also a super useful tool for SAS data capture and <a href=\"https://www.linkedin.com/pulse/zen-art-data-quality-allan-bowe/\">data quality</a>, as well as <a href=\"https://datacontroller.io/euc-management-system/\">EUC</a> / Power BI integration and is available as a free 30 day demo version.\n<p>Happy coding!</p>","frontmatter":{"title":"Loading files to SAS with CURL","path":"/loading-files-to-sas-with-curl/","previewImg":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#282828","images":{"fallback":{"src":"/static/86eccdd200412a55e8c60e21c5560968/a7181/frontmatter3.png","srcSet":"/static/86eccdd200412a55e8c60e21c5560968/74380/frontmatter3.png 200w,\n/static/86eccdd200412a55e8c60e21c5560968/fd832/frontmatter3.png 400w,\n/static/86eccdd200412a55e8c60e21c5560968/a7181/frontmatter3.png 800w","sizes":"(min-width: 800px) 800px, 100vw"},"sources":[{"srcSet":"/static/86eccdd200412a55e8c60e21c5560968/cff98/frontmatter3.webp 200w,\n/static/86eccdd200412a55e8c60e21c5560968/76faa/frontmatter3.webp 400w,\n/static/86eccdd200412a55e8c60e21c5560968/047a8/frontmatter3.webp 800w","type":"image/webp","sizes":"(min-width: 800px) 800px, 100vw"}]},"width":800,"height":251}}},"tags":["sas","SAS Stored Process Web Application","sas web app","SAS Web Applications","SAS Web Apps","Stored Process Web Applications","Stored Processes","Web Applications"],"date":"Dec 02, 2018"}}},{"post":{"html":"<p>I’ve <a href=\"https://www.linkedin.com/pulse/5-tips-sas-app-developers-allan-bowe/\">said it before</a> and I’ll say it again - SAS is an unparalleled platform for <a href=\"https://support.sas.com/resources/papers/proceedings17/1091-2017.pdf\">lightning fast</a> development of enterprise-grade, business focused web applications.  Not least because it comes pre-installed with a Web Server and an incredibly powerful Application Server for building the backend services - known as Stored Processes.</p>\n<p>In order to build robust, scalable Stored Process Web Applications it’s imperative to be able to test these services in an automated fashion - eg from your test server or local machine, using a test framework like jenkins or directly with shell scripts.  If you have IWA / SSO configured in SAS then this is straightforward - simply call the URL.  However if you are connecting to a machine outside your intranet, or if passwords are required for some other reason, then the following code snippet will be helpful.</p>\n<pre>curl -v -L -c cookiefile -b cookiefile \\\r\n    -d \"_program=$STP&amp;_username=$USERNAME&amp;_password=$PASSWORD\" \\\r\n    https://yourdomain.com/SASStoredProcess/do</pre>\n<p>Things to note:</p>\n<ol>\r\n \t<li>A cookiefile is used so that the session token can be written (<code>-c</code>) and subsequently read (<code>-b</code>) by the SASLogon redirect.</li>\r\n \t<li>The <code>_username</code> and <code>_password</code> parameters are used to authenticate (see <a href=\"https://support.sas.com/documentation/cdl/en/stpug/61271/HTML/default/viewer.htm#a003259930.htm\">docs</a>)</li>\r\n \t<li><code>-v</code> for verbose logging, <code>-L</code> to tell curl to follow the redirect (SASLogon) location</li>\r\n</ol>\r\nYou can of course redirect the output to a file, by appending <code>&gt; filename.ext</code> or using the <code>--output</code> option.\n<p>If you’d like more info on building web applications on SAS, check out these <a href=\"https://www.linkedin.com/pulse/5-tips-sas-app-developers-allan-bowe/\">5 tips</a> and this <a href=\"/building-web-apps-with-sas\">quick start guide</a>, or the SPWA tag on<a href=\"https://sasensei.com\"> <a href=\"https://sasensei.com\">https://sasensei.com</a></a> and last but not least, <a href=\"https://sasjs.io\"><a href=\"https://sasjs.io\">https://sasjs.io</a></a>.</p>","frontmatter":{"title":"Using CURL with SAS Stored Processes","path":"/using-curl-with-sas-stored-processes/","previewImg":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#080808","images":{"fallback":{"src":"/static/66a64995bea2a31d7f5e09c9c32dacc8/3cd85/frontmatter4.png","srcSet":"/static/66a64995bea2a31d7f5e09c9c32dacc8/1a74a/frontmatter4.png 200w,\n/static/66a64995bea2a31d7f5e09c9c32dacc8/44e8a/frontmatter4.png 400w,\n/static/66a64995bea2a31d7f5e09c9c32dacc8/3cd85/frontmatter4.png 800w","sizes":"(min-width: 800px) 800px, 100vw"},"sources":[{"srcSet":"/static/66a64995bea2a31d7f5e09c9c32dacc8/2176e/frontmatter4.webp 200w,\n/static/66a64995bea2a31d7f5e09c9c32dacc8/526a6/frontmatter4.webp 400w,\n/static/66a64995bea2a31d7f5e09c9c32dacc8/b8798/frontmatter4.webp 800w","type":"image/webp","sizes":"(min-width: 800px) 800px, 100vw"}]},"width":800,"height":283}}},"tags":["Administration","sas","SAS Programming","SAS Stored Process Web Application","sas web app","SAS Web Applications","SAS Web Apps","sasensei","Stored Process Web Applications","Stored Processes","Web Applications"],"date":"Aug 08, 2018"}}},{"post":{"html":"<p>As gotcha’s go, this was a good one!</p>\n<p>We had a report being generated with dates that were inconsistent with the source file (MMDDYY instead of DDMMYY), but only for certain records.  This was definitely related to the <span style=\"font-family: 'courier new' , 'courier' , monospace;\">ANYDTDTE</span>. informat, but the strange thing was - this issue only occurred when the report was generated by the Stored Process Server (it was fine in batch).</p>\n<p>The <span style=\"font-family: 'courier new' , 'courier' , monospace;\">ANYDTDTE</span>. informat is driven by the locale setting but as per the chain of sasv9.cfg files we had <span style=\"font-family: Courier New, Courier, monospace;\">-LOCALE en_GB</span><span style=\"font-family: courier new, courier, monospace;\"> </span><span style=\"font-family: inherit;\">defined for</span> both servers.  So I checked the logs, and found something interesting..</p>\n<p>One of our STP applications can be triggered from either Excel or a browser.  I could see that the same user had triggered two requests, less than a minute apart, one from excel and one from a browser (as evidenced by the value of the _HTUA variable)</p>\n<p>Yet one session had <span style=\"font-family: 'courier new' , 'courier' , monospace;\">_USERLOCALE=en_US</span> and the other had <span style=\"font-family: 'courier new' , 'courier' , monospace;\">_USERLOCALE=en_GB</span>!!</p>\n<p>As it turns out, the locale for a Stored Process session <i>can change according to the context of the client</i> - as described in this <a href=\"https://support.sas.com/kb/45/414.html\" target=\"_blank\" rel=\"noopener\">usage note</a>.</p>\n<p>So the fix is simply to add the following code (as per your desired locale):</p>\n<blockquote><span style=\"font-family: 'courier new' , 'courier' , monospace;\">options locale=en_gb;</span></blockquote>\r\nBut where?\n<p>I tried fixing this via the autoexec, but this had no effect (likely because the server is running before the request arrives) so instead I added it to the stp init program - which worked a treat.\r\n<span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; margin-bottom: 1.0725rem;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 26.595744680851062%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGUlEQVR42i2Qy3KCMABF+f+P6XTZdTc+qqBVEQlJ5E3lDeL2NNAuzuQmd+bM3FiuUlyV5hJIzkKaU+HdIy5Sc55znHFLcmTxIGo6iuFJMU78PF9/zNkwv2emtzw/QGtNVVVEYYTwfbSSBoWSEikEWgYI72r6kH4c6dqWumpom4bB5IWupTN3K80y0jRdmMUb+8TGubA9eqwPHivnyvqk2Hopu9WO9fsbvi8YhoG8rAni/J+CrGqxMiOM44QkmYV3tgeX/feN3dGIbNfIXU5+iIhL0ycctns2X3te05OoqHBUxtFgBykyr40wzynLcpkcRhG+UARmpute0cENWzz4cCc+vY5xmkjMX+5sh6Hvaep6mTr2Hc+hX/Ivq9xrZ5og9fUAAAAASUVORK5CYII='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Capture 300x79\" title=\"\" src=\"/static/30f4d55f64791cc5630df4113fca45a1/5a46d/Capture-300x79.png\" srcset=\"/static/30f4d55f64791cc5630df4113fca45a1/4dcb9/Capture-300x79.png 188w,\n/static/30f4d55f64791cc5630df4113fca45a1/5a46d/Capture-300x79.png 300w\" sizes=\"(max-width: 300px) 100vw, 300px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span>\r\n<b>I recommend adding this to your init program</b>, unless you really do want your outputs to change according to the locale setting of the client application!</p>\n<div style=\"clear: both; text-align: center;\"></div>","frontmatter":{"title":"Look out - Locale Gotcha","path":"/look-out-locale-gotcha/","previewImg":{"childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#e8e8e8","images":{"fallback":{"src":"/static/e4e610369faede071a7330a17d396eb6/eec87/frontmatter16.png","srcSet":"/static/e4e610369faede071a7330a17d396eb6/7d5fc/frontmatter16.png 177w,\n/static/e4e610369faede071a7330a17d396eb6/5ab00/frontmatter16.png 355w,\n/static/e4e610369faede071a7330a17d396eb6/eec87/frontmatter16.png 709w","sizes":"(min-width: 709px) 709px, 100vw"},"sources":[{"srcSet":"/static/e4e610369faede071a7330a17d396eb6/29ce6/frontmatter16.webp 177w,\n/static/e4e610369faede071a7330a17d396eb6/dc4e2/frontmatter16.webp 355w,\n/static/e4e610369faede071a7330a17d396eb6/98f2c/frontmatter16.webp 709w","type":"image/webp","sizes":"(min-width: 709px) 709px, 100vw"}]},"width":800,"height":211.00141043723553}}},"tags":["sas","SAS Stored Process Web Application","Stored Process Web Applications","Web Applications"],"date":"Dec 12, 2016"}}},{"post":{"html":"<p>I’ve recently been using Visual Studio to build my SAS Web Apps, which is great as the <a href=\"https://en.wikipedia.org/wiki/Intelligent_code_completion\" target=\"_blank\">intellisense </a>will even scan css files to help with code completion.  Perhaps the best feature though is the ability to right click and immediately ‘view in browser’ - which spins up a local web server and avoids the need to constantly modify files on the main dev SAS web server.<br /><br />However - there are a few things to remember when using this feature to actually connect to SAS.<br /><br /><h3>Same Origin Policy</h3>In simple terms, this is a browser security feature that prevents javascript from connecting to a different server than that from which the page was served.  You’ll know you’re affected if you see something like this in the console:<br /><br /><blockquote><span style=\"font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: x-small;\">XMLHttpRequest cannot load <a href=\"https://SASMIDTIER:8080/SASStoredProcess/do\">https://SASMIDTIER:8080/SASStoredProcess/do</a>. No ‘Access-Control-Allow-Origin’ header is present on the requested resource. Origin ’<a href=\"http://localhost:54048\">http://localhost:54048</a>’ is therefore not allowed access.</span></blockquote>To avoid this (using chrome) simply launch from the command line with that feature disabled - as follows:<br /><blockquote><span style=\"font-family: &quot;courier new&quot; , &quot;courier&quot; , monospace; font-size: x-small;\">“C:Program Files (x86)GoogleChromeApplicationchrome.exe” —user-data-dir=“C:/Chrome dev session” —disable-web-security</span></blockquote><h3>hostUrl</h3>Now that we are launching from a local host, the Boemska SAS adapter is unable to automatically determine the mid-tier location.  This info needs to be provided, but not hard coded as we still need the code to work in different environments when it gets promoted.  The following javascript code serves:<br /><br /><div style=\"line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;\"><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\">  </span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt;\">if</span><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\">(location.hostname === </span><span style=\"color: #a31515; font-family: &quot;consolas&quot;; font-size: 9.5pt;\">‘localhost’ </span><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\">|| </span><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\">location.hostname === </span><span style=\"color: #a31515; font-family: &quot;consolas&quot;; font-size: 9.5pt;\">‘127.0.0.1’</span><span style=\"font-family: consolas; font-size: 9.5pt;\">) {</span></div><div style=\"line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;\"><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\">    </span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt;\">var</span><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\"> strHostURL = </span><span style=\"color: #a31515; font-family: &quot;consolas&quot;; font-size: 9.5pt;\">’<a href=\"https://SASMIDTIER:8080/&#x27;\">https://SASMIDTIER:8080/’</a></span><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\">;</span></div><div style=\"line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;\"><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\">  } </span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt;\">else</span><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\"> {</span></div><div style=\"line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;\"><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\">    strHostURL = </span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt;\">null</span><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\">;</span></div><div style=\"line-height: normal; margin-bottom: .0001pt; margin-bottom: 0cm; mso-layout-grid-align: none; text-autospace: none;\"><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt;\">  }</span></div><br /><div><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\">  </span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\">var</span><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\">adapter = </span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\">new</span><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\"> h54s({ hostUrl: strHostURL });</span></div><br /><h3>HTML file location</h3><div>This may not be an issue with your web server / configuration, but something to remember.  I normally keep my my web files organised as follows:</div><div><ul><li><span style=\"font-family: inherit;\">ROOT.war</span></li><ul><li><span style=\"font-family: inherit;\">JS</span></li><li><span style=\"font-family: inherit;\">CSS</span></li><li><span style=\"font-family: inherit;\">HTML</span></li><li><span style=\"font-family: inherit;\">Images</span></li></ul></ul><div>In order to reference scripts / css / images from my html files, I normally use the ”..” syntax to tell the browser to look ‘up and then down’ a directory, eg as follows:</div></div><div><br /></div><div><div><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\">  </span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\">&#x3C;</span><span style=\"color: maroon; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\">script</span><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\"> </span><span style=\"color: red; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\">src</span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\">=../js/h54s.js>&#x3C;/</span><span style=\"color: maroon; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\">script</span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 115%;\">></span></div><span style=\"white-space: pre-wrap;\"></span></div><div><br /></div><div>Unfortunately that approach doesn’t work in the web server spun up by VS2015, so I have to temporarily move my html file up into the parent folder and permanently change my references to read as follows:</div><div><br /></div><div><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 14.5667px;\">  </span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 14.5667px;\">&#x3C;</span><span style=\"color: maroon; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 14.5667px;\">script</span><span style=\"font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 14.5667px;\"> </span><span style=\"color: red; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 14.5667px;\">src</span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 14.5667px;\">=/js/h54s.js>&#x3C;/</span><span style=\"color: maroon; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 14.5667px;\">script</span><span style=\"color: blue; font-family: &quot;consolas&quot;; font-size: 9.5pt; line-height: 14.5667px;\">></span></div><div><br /></div><div>For more information on building Web Apps with SAS you can also check out this <a href=\"/building-web-apps-with-sas/\" target=\"_blank\">guide</a>.  Enjoy!</div></p>","frontmatter":{"title":"Building SAS Apps Locally","path":"/building-sas-apps-locally/","previewImg":null,"tags":["Data Adapter","Data Adaptor","sas","SAS Stored Process Web Application","SAS Web Applications","SAS Web Apps","Stored Process Web Applications","Stored Processes","Visual Studio","Web Applications"],"date":"Oct 21, 2016"}}}]}},"pageContext":{"page":"category","archives":{"2012":8,"2013":10,"2014":4,"2015":7,"2016":17,"2017":12,"2018":9,"2019":2,"2020":3,"2021":1,"2022":7,"2023":1,"2024":1,"2025":3},"filter":{"frontmatter":{"tags":{"in":["SAS Stored Process Web Application"]}}},"limit":10,"skip":0,"numPages":1,"currentPage":1,"tag":"SAS Stored Process Web Application"}},"staticQueryHashes":["1133634862"],"slicesMap":{}}