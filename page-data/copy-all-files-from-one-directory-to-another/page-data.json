{"componentChunkName":"component---src-templates-template-tsx","path":"/copy-all-files-from-one-directory-to-another/","result":{"data":{"post":{"id":"c9da8a3f-89e1-5a07-8515-cb3524d85060","html":"<p><strong>EDIT (2021):</strong>\nThe <a href=\"https://core.sasjs.io/mp__copyfolder_8sas.html\">mp_copyfolder</a> macro in the <a href=\"https://github.com/sasjs/core\">SASjs Core</a> library is now available, and is <em>far</em> preferable to the original example, for reasons such as:</p>\n<ol>\n<li>It will also include subdirectories (recursive function)</li>\n<li>There is no need for a datalines step (so will work inside a macro)</li>\n<li>It includes a <a href=\"https://core.sasjs.io/mp__copyfolder_8test_8sas.html\">test</a> and <a href=\"https://core.sasjs.io/mp__copyfolder_8sas.html\">documentation</a>!</li>\n</ol>\n<p>Source:  <a href=\"https://github.com/sasjs/core/blob/main/base/mp_copyfolder.sas\">https://github.com/sasjs/core/blob/main/base/mp_copyfolder.sas</a></p>\n<p><strong>Original Post (2013):</strong></p>\n<p>A platform agnostic copyfolder utility.. Just modify the in / out ROOT folders, and enter the corresponding copy FROM / copy TO directories in the cards file.</p>\n<p><br /><div style=\"font-family: 'Courier New'; font-size: 10px; min-height: 11px;\"><br /></div><div style=\"color: #008f00; font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #0433ff;\">%let</span><span style=\"color: black;\"> inroot=C:temp; </span>/_ NO trailing slashes <em>/</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #0433ff;\">%let</span> outroot=C:temp;</div><div style=\"font-family: 'Courier New'; font-size: 10px; min-height: 11px;\"><br /></div><div style=\"color: #0433ff; font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #011993;\"><b>data</b></span><span style=\"color: black;\"> </span><em>null</em><span style=\"color: black;\">;</span></div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  <span style=\"color: #0433ff;\">infile</span> cards <span style=\"color: #0433ff;\">dsd</span>;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  <span style=\"color: #0433ff;\">input</span> INDIR : <span style=\"color: #009193;\">$60.</span> OUTDIR : <span style=\"color: #009193;\">$60.</span> ;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  <span style=\"color: #0433ff;\">call</span> symput(cats(<span style=\"color: #942193;\">‘INDIR’</span>,<em>n</em>),cats(<span style=\"color: #942193;\">“&#x26;inroot”</span>,indir));</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  <span style=\"color: #0433ff;\">call</span> symput(cats(<span style=\"color: #942193;\">‘OUTDIR’</span>,<em>n</em>),cats(<span style=\"color: #942193;\">“&#x26;outroot”</span>,outdir));</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  <span style=\"color: #0433ff;\">call</span> symput(<span style=\"color: #942193;\">‘CNT’</span>,put(<em>n</em>,<span style=\"color: #009193;\"><b>8.</b></span>));</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #0433ff;\">cards4</span>;/</em> list relative folders with NO leading or trailing slashes <em>/</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">mxc,mxd</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">;;;;</div><div style=\"color: #0433ff; font-family: 'Courier New'; font-size: 10px;\">run<span style=\"color: black;\">;</span></div><div style=\"font-family: 'Courier New'; font-size: 10px; min-height: 11px;\"><br /></div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #011993;\"><b>%macro</b></span> copyFile(in,out);</div><div style=\"color: #008f00; font-family: 'Courier New'; font-size: 10px;\">/</em> these IN and OUT filerefs can point to any file <em>/</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">filename in <span style=\"color: #942193;\">“&#x26;in”</span>; </div><div style=\"font-family: 'Courier New'; font-size: 10px;\">filename out <span style=\"color: #942193;\">“&#x26;out”</span>; </div><div style=\"font-family: 'Courier New'; font-size: 10px; min-height: 11px;\"><br /></div><div style=\"color: #008f00; font-family: 'Courier New'; font-size: 10px;\">/</em> copy the file byte-for-byte  _/</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">data <em>null</em>;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  length filein <span style=\"color: #009193;\"><b>8</b></span> fileid <span style=\"color: #009193;\"><b>8</b></span>;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  filein = fopen(<span style=\"color: #942193;\">‘in’</span>,<span style=\"color: #942193;\">‘I’</span>,<span style=\"color: #009193;\"><b>1</b></span>,<span style=\"color: #942193;\">‘B’</span>);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  fileid = fopen(<span style=\"color: #942193;\">‘out’</span>,<span style=\"color: #942193;\">‘O’</span>,<span style=\"color: #009193;\"><b>1</b></span>,<span style=\"color: #942193;\">‘B’</span>);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  rec = <span style=\"color: #942193;\">‘20’x</span>;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  do while(fread(filein)=<span style=\"color: #009193;\"><b>0</b></span>);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">     rc = fget(filein,rec,<span style=\"color: #009193;\"><b>1</b></span>);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">     rc = fput(fileid, rec);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">     rc =fwrite(fileid);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  end;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  rc = fclose(filein);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  rc = fclose(fileid);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">run;</div><div style=\"font-family: 'Courier New'; font-size: 10px; min-height: 11px;\"><br /></div><div style=\"font-family: 'Courier New'; font-size: 10px;\">filename in clear;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">filename out clear;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #011993;\"><b>%mend</b></span> CopyFile;</div><div style=\"font-family: 'Courier New'; font-size: 10px; min-height: 11px;\"><br /></div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #011993;\"><b>%macro</b></span> getFilenames(location,dataset);</div><div style=\"color: #942193; font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: black;\">filename <em>dir</em> </span>“%bquote(&#x26;location.)”<span style=\"color: black;\">;</span></div><div style=\"font-family: 'Courier New'; font-size: 10px;\">data &#x26;<span style=\"color: #009193;\">dataset.</span>(keep=memname);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  handle=dopen( <span style=\"color: #942193;\">’<em>dir</em>’</span> );</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  if handle > <span style=\"color: #009193;\"><b>0</b></span> then do;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">    count=dnum(handle);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">    do i=<span style=\"color: #009193;\"><b>1</b></span> to count;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">      memname=dread(handle,i);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">      output;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">    end;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  end;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">  rc=dclose(handle);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">run;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\">filename <em>dir</em> clear;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #011993;\"><b>%mend</b></span> getFilenames;</div><div style=\"font-family: 'Courier New'; font-size: 10px; min-height: 11px;\"><br /></div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #011993;\"><b>%macro</b></span> DoCopy();</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #0433ff;\">%do</span> x=<span style=\"color: #009193;\"><b>1</b></span> <span style=\"color: #0433ff;\">%to</span> &#x26;cnt;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"white-space: pre;\"> </span>%<b><i>getFilenames</i></b>(&#x26;&#x26;indir&#x26;x,ds&#x26;x);</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"white-space: pre;\"> </span>data <em>null</em>;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"white-space: pre;\"> </span>set ds&#x26;x;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"white-space: pre;\"> </span>call execute(cats(<span style=\"color: #942193;\">‘%copyfile(&#x26;&#x26;indir&#x26;x’</span>,memname,<span style=\"color: #942193;\">”,&#x26;&#x26;outdir&#x26;x”</span>,memname,<span style=\"color: #942193;\">’)’</span>));</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"white-space: pre;\"> </span>run;</div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"white-space: pre;\"> </span>proc sql; drop table ds&#x26;x; quit;</div><div style=\"color: #0433ff; font-family: 'Courier New'; font-size: 10px;\">%end<span style=\"color: black;\">;</span></div><div style=\"font-family: 'Courier New'; font-size: 10px;\"><span style=\"color: #011993;\"><b>%mend</b></span> DoCopy;</div><div style=\"font-family: 'Courier New'; font-size: 10px; min-height: 11px;\"><br /></div><div style=\"font-family: 'Courier New'; font-size: 10px;\">%<b><i>docopy</i></b>;</div></p>","frontmatter":{"title":"Copy All Files From One Directory To Another","path":"/copy-all-files-from-one-directory-to-another/","previewImg":null,"tags":["SAS","Macro"],"date":"Jul 23, 2013"}}},"pageContext":{"archives":{"2012":8,"2013":10,"2014":4,"2015":7,"2016":17,"2017":12,"2018":9,"2019":2,"2020":3,"2021":1,"2022":7,"2023":1,"2024":1,"2025":3}}},"staticQueryHashes":["1133634862"],"slicesMap":{}}