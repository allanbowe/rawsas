{"componentChunkName":"component---src-templates-template-tsx","path":"/error-the-referenced-entity-has-not-been-defined/","result":{"data":{"post":{"id":"9dc24f57-948e-52c5-9343-2a14b7afcc4f","html":"<p>I received the following today when uploading a large XML file via proc metadata:</p>\n<pre>ERROR: The referenced entity has not been defined.</pre>\n<p>All my entities had been appropriately escaped (or so I thought):</p>\n<pre>select (instr);\n  when (';') put '&amp;semi;';\n  when ('&amp;') put '&amp;amp;';\n  when ('&lt;') put '&amp;lt;';\n  when ('&gt;') put '&amp;gt;';\n  when (\"'\") put '&amp;apos;';\n  when ('\"') put '&amp;quot;';\n  when ('0A'x) put '&amp;#x0a;';\n  when ('0D'x) put '&amp;#x0d;';\n  when ('</pre>\n<p>Eventually I narrowed it down to this:</p>\n<pre>&lt;UpdateMetadata&gt;\n  &lt;Reposid&gt;$METAREPOSITORY&lt;/Reposid&gt;\n  &lt;Metadata&gt;\n    &lt;TextStore id='A5RIITO4.AG000INH' StoredText='&amp;semi;'&gt;\n    &lt;/TextStore&gt;\n  &lt;/Metadata&gt;\n  &lt;NS&gt;SAS&lt;/NS&gt;\n  &lt;Flags&gt;268435456&lt;/Flags&gt;\n&lt;/UpdateMetadata&gt;\n</pre>\n<p>It seems that the metadata XML parser doesn’t like the HTML <code>&#x26;semi</code> entity reference.  On further investigation it <a href=\"https://stackoverflow.com/a/40942504/66696\">appears</a> that XML does not really support HTML-like named references (like the understandable <code>&#x26;semi</code>) in favour of hex type codes (such as <code>&#x26;#x3b;</code>).  The exception are the following ’<a href=\"http://xmlnews.org/docs/xml-basics.html#references\">main five</a>‘:<a href=\"http://xmlnews.org/docs/xml-basics.html#references\" rel=\"attachment wp-att-410\"><span class=\"gatsby-resp-image-wrapper\" style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; margin-bottom: 1.0725rem;\">\n      <span class=\"gatsby-resp-image-background-image\" style=\"padding-bottom: 60.1063829787234%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAAB0klEQVR42m1S227aQBD1v6fiKdRQoSSUp7YJUoKUkAvGkBantWsc7HCzABtssOFDTmYWjBaSh9HOzuXs2ZmjWJYFraGh1+vBdV14rgfLNDEajdBut6HrLThdG53OH5jmP1j/7X1NU9cpbsAwOuKczQIoTa2JSrmCLycnKH+vQFWLyJ+e4uqqiseHR1xclHF+VkI+n0exQLmvBRRUFWelEi4vq/hWLCKXy0GluN56hpIkCdI0FTYej7FarbBer8k2CIIAvj/Gm+cJP0m2ddt8uu/j2uVyiTiKoDAAW0rAjacnQZuT3PRiGKjVavj18wda7d8U39ZyXgBkZxwjw1E4wA4z9YjJfL4QRfzycDDAq+Ps4nMRk5sz4AzjA2C//4aQGsWdmhnMMi3Yto3pbCZqsnoZRL4r2YWLHae7B0zTNW23C03TBGBAozhu/gxUkRNuz8ViEZG/FAw9kpHxYhDzvvjyZrM5AJGBM1Pkgul0iiiKKRGLZl7K7e0dHu7v0dhpNfu2PDv5PGDILDJfLGU4BAufBT+gBfm+/2GOx99WZPphGO59ls1fYnhzfY0qibxer4sFpaS/Y5CDpchJfv1AZySRyWSCCY2ClxWG813u8xky4Dse4zzIm0sg3QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"></span>\n  <img class=\"gatsby-resp-image-image\" alt=\"Screen Shot 2018 12 09 at 14 43 14 300x181\" title=\"\" src=\"/static/2cdcb7fe5c77245e4d4d68da0422415b/5a46d/Screen-Shot-2018-12-09-at-14.43.14-300x181.png\" srcset=\"/static/2cdcb7fe5c77245e4d4d68da0422415b/4dcb9/Screen-Shot-2018-12-09-at-14.43.14-300x181.png 188w,\n/static/2cdcb7fe5c77245e4d4d68da0422415b/5a46d/Screen-Shot-2018-12-09-at-14.43.14-300x181.png 300w\" sizes=\"(max-width: 300px) 100vw, 300px\" style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\" loading=\"lazy\" decoding=\"async\">\n    </span></a></p>\n<p>The authoritative discussion of named entities for XML is available here, but in summary - if you are looking to escape the content loaded into metadata XML, the following SAS code is preferred:</p>\n<pre>select (instr);\n  when (';') put '&amp;#x3b;';\n  when ('&amp;') put '&amp;amp;';\n  when ('&lt;') put '&amp;lt;';\n  when ('&gt;') put '&amp;gt;';\n  when (\"'\") put '&amp;apos;';\n  when ('\"') put '&amp;quot;';\n  when ('0A'x) put '&amp;#x0a;';\n  when ('0D'x) put '&amp;#x0d;';\n  when ('</pre>\n<p>If you need to update your metadata, you can find a range of useful macros in the SASjs<a href=\"https://github.com/sasjs/core\">Core</a> library.</p>\n<pre></pre>","frontmatter":{"title":"ERROR: The referenced entity has not been defined.","path":"/error-the-referenced-entity-has-not-been-defined/","previewImg":{"publicURL":"/static/6e4cb819fd72e50e164d7871c0fbcb2e/frontmatter2.png","childImageSharp":{"gatsbyImageData":{"layout":"constrained","backgroundColor":"#f8f8f8","images":{"fallback":{"src":"/static/6e4cb819fd72e50e164d7871c0fbcb2e/e0bbd/frontmatter2.png","srcSet":"/static/6e4cb819fd72e50e164d7871c0fbcb2e/d50dc/frontmatter2.png 200w,\n/static/6e4cb819fd72e50e164d7871c0fbcb2e/decc1/frontmatter2.png 400w,\n/static/6e4cb819fd72e50e164d7871c0fbcb2e/e0bbd/frontmatter2.png 800w","sizes":"(min-width: 800px) 800px, 100vw"},"sources":[{"srcSet":"/static/6e4cb819fd72e50e164d7871c0fbcb2e/2aea7/frontmatter2.webp 200w,\n/static/6e4cb819fd72e50e164d7871c0fbcb2e/e1c47/frontmatter2.webp 400w,\n/static/6e4cb819fd72e50e164d7871c0fbcb2e/fdd9a/frontmatter2.webp 800w","type":"image/webp","sizes":"(min-width: 800px) 800px, 100vw"}]},"width":800,"height":158}}},"tags":["metadata","SAS Programming","SAS Web Applications","SAS Web Apps","Stored Process Web Applications","Stored Processes","Web Applications"],"date":"Dec 09, 2018"}}},"pageContext":{"archives":{"2012":8,"2013":10,"2014":4,"2015":7,"2016":17,"2017":12,"2018":9,"2019":2,"2020":3,"2021":1,"2022":7,"2023":1,"2024":1,"2025":3}}},"staticQueryHashes":["1133634862"],"slicesMap":{}}