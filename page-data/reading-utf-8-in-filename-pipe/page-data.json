{"componentChunkName":"component---src-templates-template-tsx","path":"/reading-utf-8-in-filename-pipe/","result":{"data":{"post":{"id":"fbcc7c59-cced-5043-88b5-a5761a470207","html":"<p>Having been blessed with an en-dash (alt + 2013) in our TFS project root, I’ve been having lots of fun getting SAS to ‘play nicely’ with non-ascii characters when running OS commands (eg tf.exe).<br /><br />Storing the values in macro variables works fine for direct use (eg in an X command), but running a SAS generated .bat file was proving challenging - until I realised that the issue was actually within the windows shell, rather than SAS itself.<br /><br />The solution turned out to be twofold.  Firstly, the batch file itself needed to be UTF-8 encoded WITHOUT the BOM marker.  This required the <span style=\"background-color: white; color: blue; font-family: &quot;courier new&quot;;\">nobomfile</span>  system <a href=\"https://support.sas.com/documentation/cdl/en/nlsref/61893/HTML/default/viewer.htm#a003105792.htm\" target=\"_blank\">option</a> to be in place before creating the file.<br /><br />Secondly, the shell needs to be configured to read UTF-8 characters.  This can be done by changing the codepage (using  <span style=\"background-color: #eff0f1; color: #242729; font-family: &quot;consolas&quot; , &quot;menlo&quot; , &quot;monaco&quot; , &quot;lucida console&quot; , &quot;liberation mono&quot; , &quot;dejavu sans mono&quot; , &quot;bitstream vera sans mono&quot; , &quot;courier new&quot; , monospace , sans-serif; font-size: 13px; white-space: inherit;\">chcp 65001</span>) and <a href=\"/chaining-windows-commands-in-sas-filename-pipe/\" target=\"_blank\">chaining</a> with an ampersand.<br /><br />Sample code as follows:<br /><blockquote style=\"margin-bottom: 0.0001pt;\"><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">options</span><span style=\"background: white; font-family: &quot;courier new&quot;;\"> </span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">nobomfile</span><span style=\"background: white; font-family: &quot;courier new&quot;;\">;<br /></span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">%let</span><span style=\"background: white; font-family: &quot;courier new&quot;;\"> work=</span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">%sysfunc</span><span style=\"background: white; font-family: &quot;courier new&quot;;\">(pathname(work));<br /></span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">%let</span><span style=\"background: white; font-family: &quot;courier new&quot;;\"> file=&#x26;work/mybatchfile.bat;</span></blockquote>         <b><span style=\"background: white; color: navy; font-family: &quot;courier new&quot;;\">data</span></b><span style=\"background: white; font-family: &quot;courier new&quot;;\"> </span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\"><em>null</em></span><span style=\"background: white; font-family: &quot;courier new&quot;;\">;</span><br /><span style=\"background: white; font-family: &quot;courier new&quot;;\">      </span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">file</span><span style=\"background: white; font-family: &quot;courier new&quot;;\"> </span><span style=\"background: white; color: purple; font-family: &quot;courier new&quot;;\">“&#x26;file”</span><span style=\"background: white; font-family: &quot;courier new&quot;;\"> </span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">encoding</span><span style=\"background: white; font-family: &quot;courier new&quot;;\">=</span><span style=\"background: white; color: purple; font-family: &quot;courier new&quot;;\">‘utf-8’</span><span style=\"background: white; font-family: &quot;courier new&quot;;\">;</span><br /><span style=\"background: white; font-family: &quot;courier new&quot;;\">      </span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">put</span><span style=\"background: white; font-family: &quot;courier new&quot;;\"> </span><span style=\"background: white; color: purple; font-family: &quot;courier new&quot;;\">“dir \"\"&#x26;work\"\" ”</span><span style=\"background: white; font-family: &quot;courier new&quot;;\">;</span><br /><span style=\"background: white; font-family: &quot;courier new&quot;;\">      </span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">put</span><span style=\"background: white; font-family: &quot;courier new&quot;;\"> </span><span style=\"background: white; color: purple; font-family: &quot;courier new&quot;;\">‘echo Nonstandard – Dash’</span><span style=\"background: white; font-family: &quot;courier new&quot;;\">;</span><br /><span style=\"background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; font-family: &quot;courier new&quot;;\">    </span><span style=\"background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; color: navy; font-family: &quot;courier new&quot;; font-weight: bold;\">run</span><span style=\"background: white; font-family: &quot;courier new&quot;;\">;</span><br /><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">    filename</span><span style=\"background: white; font-family: &quot;courier new&quot;;\"> mypipe </span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">pipe</span><span style=\"background: white; font-family: &quot;courier new&quot;;\"> </span><span style=\"background: white; color: purple; font-family: &quot;courier new&quot;;\">“chcp 65001 &#x26; \"\"&#x26;file\"\" ”</span><span style=\"background: white; font-family: &quot;courier new&quot;;\">;</span><br /><span style=\"background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; font-family: &quot;courier new&quot;;\">    </span><span style=\"background-attachment: initial; background-clip: initial; background-color: white; background-image: initial; background-origin: initial; background-position: initial; background-repeat: initial; background-size: initial; color: navy; font-family: &quot;courier new&quot;; font-weight: bold;\">data</span><span style=\"background: white; font-family: &quot;courier new&quot;;\"> </span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\"><em>null</em></span><span style=\"background: white; font-family: &quot;courier new&quot;;\">;</span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">infile</span><span style=\"background: white; font-family: &quot;courier new&quot;;\"> mypipe;</span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">input</span><span style=\"background: white; font-family: &quot;courier new&quot;;\">;</span><span style=\"background: white; color: blue; font-family: &quot;courier new&quot;;\">list</span><span style=\"background: white; font-family: &quot;courier new&quot;;\">;</span><b><span style=\"background: white; color: navy; font-family: &quot;courier new&quot;;\">run</span></b><span style=\"background: white; font-family: &quot;courier new&quot;;\">;</span><br /><br /><div></div><br /></p>","frontmatter":{"title":"Reading UTF-8 in Filename Pipe","path":"/reading-utf-8-in-filename-pipe/","previewImg":null,"tags":["SQL"],"date":"Sep 06, 2016"}}},"pageContext":{"archives":{"2012":8,"2013":10,"2014":4,"2015":7,"2016":17,"2017":12,"2018":9,"2019":2,"2020":3,"2021":1,"2022":7,"2023":1,"2024":1,"2025":3}}},"staticQueryHashes":["1133634862"],"slicesMap":{}}